<!-- Generated by SpecStory -->

# Update conference yaml parser format (2025-06-21 10:57Z)

_**User**_

This is the fetched conference yaml's format
```
Description of the fields:
<table>
   <tr>
      <th colspan="3">Field name</th>
      <th>Description</th>
   </tr>
   <tr>
      <td colspan="3"><code>title</code>*</td>
      <td>Short conference name, without year, uppercase</td>
   </tr>
   <tr>
      <td colspan="3"><code>description</code>*</td>
      <td>Description, or long name, with no session</td>
   </tr>
   <tr>
      <td colspan="3"><code>sub</code>*</td>
      <td>The category that the conference is labeled by CCF. See the matching table below</td>
   </tr>
   <tr>
      <td rowspan="3"><code>rank</code>*</td>
      <td colspan="2"><code>ccf</code>*</td>
      <td>The level that the conference is ranked by CCF, e.g., <code>A</code>, <code>B</code>, <code>C</code>, <code>N</code></td>
   </tr>
   <tr>
   <td colspan="2"><code>core</code></td>
   <td>The level that the conference is ranked by CORE, e.g., <code>A*</code>, <code>A</code>, <code>B</code>, <code>C</code>, <code>N</code></td>
   </tr>
   <tr>
   <td colspan="2"><code>thcpl</code></td>
   <td>The level that the conference is ranked by TH-CPL, e.g., <code>A</code>, <code>B</code>, <code>N</code></td>
   </tr>
   <tr>
      <td colspan="3"><code>dblp</code>*</td>
      <td>The suffix in dblp url, e.g., <code>iccv</code> in https://dblp.uni-trier.de/db/conf/iccv</td>
   </tr>
   <tr>
      <td rowspan="9"><code>confs</code></td>
      <td colspan="2"><code>year</code>*</td>
      <td>Year the conference is happening</td>
   </tr>
   <tr>
      <td colspan="2"><code>id</code>*</td>
      <td>conference name & year, lowercase</td>
   </tr>
   <tr>
      <td colspan="2"><code>link</code>*</td>
      <td>URL to the conference home page</td>
   </tr>
   <tr>
      <td rowspan="3"><code>timeline</code>*</td>
      <td><code>abstract_deadline</code></td>
      <td>Abstract deadline if applicable, optional</td>
   </tr>
   <tr>
      <td><code>deadline</code>*</td>
      <td>Deadline, in the format of <code>yyyy-mm-dd hh:mm:ss</code> or <code>TBD</code></td>
   </tr>
   <tr>
      <td><code>comment</code></td>
      <td>Some comments on the conference, optional</td>
   </tr>
   <tr>
      <td colspan="2"><code>timezone</code>*</td>
      <td>Timezone of deadline, currently support <code>UTC-12</code> ~ <code>UTC+12</code> & <code>AoE</code></td>
   </tr>
   <tr>
      <td colspan="2"><code>date</code>*</td>
      <td>When the main conference is happening, e.g., Mar 12-16, 2021</td>
   </tr>
   <tr>
      <td colspan="2"><code>place</code>*</td>
      <td>Where the main conference is happening, e.g., <code>city, country</code></td>
   </tr>
</table>
```
There might be multiple years in the conf yield. The last one is required.

Please update the parser based on the format and the instructions above

---

_**Assistant**_

<think><details><summary>Thought Process</summary>The user is asking me to update the YAML parser in the `fetch_conference_data_builtin.js` file. Looking at the current parser and the format description they provided, I need to understand what changes are needed.

From the format description, I can see that:
1. Each conference has fields like `title`, `description`, `sub`, `rank` (with `ccf`, `core`, `thcpl`), `dblp`
2. The `confs` field contains an array of yearly instances, each with `year`, `id`, `link`, `timeline`, `timezone`, `date`, `place`
3. The `timeline` field contains `abstract_deadline`, `deadline`, and optional `comment`
4. The instruction says "There might be multiple years in the conf yield. The last one is required." - this suggests we should focus on the most recent/last year entry.

Looking at the current parser, it seems to be trying to parse this format but might not be handling it correctly. Let me analyze the current parsing logic:

1. It looks for `- title:` to start a new conference
2. It looks for `- year:` to start a year entry
3. It looks for `timeline:` to start parsing deadlines
4. It tries to extract `deadline` and `abstract_deadline` from timeline entries

The current parser seems to have some issues and might not be following the exact YAML format described. I need to rewrite the `parseYamlContent` function to properly handle the structure described in the format table.

Based on the format, the YAML structure should be:
```yaml
- title: CONFERENCE_NAME
  description: Conference description
  sub: category
  rank:
    ccf: A/B/C/N
    core: A*/A/B/C/N (optional)
    thcpl: A/B/N (optional)
  dblp: dblp_suffix
  confs:
    - year: 2024
      id: conf2024
      link: https://...
      timeline:
        - abstract_deadline: 2024-01-01 23:59:59
          deadline: 2024-01-15 23:59:59
          comment: optional comment
      timezone: UTC-12
      date: Mar 12-16, 2024
      place: City, Country
    - year: 2025
      id: conf2025
      ...
```

And the instruction says to focus on the last/most recent year entry.

I'll modify the parser to extract the last conference year's details, ensuring I capture all the required fields. The key will be to process the `confs` array and select the final entry, which contains the most recent conference information.

The parsing strategy will involve:
1. Identifying the last entry in the `confs` array
2. Extracting specific fields like `year`, `id`, `link`, `timeline`, `timezone`, `date`, and `place`
3. Handling the nested `timeline` structure to get abstract and final deadlines
4. Ensuring optional fields are processed correctly

I'll need to update the parsing logic to be more robust and handle the nested YAML structure accurately.</details></think>

---

Looking at the YAML format you provided, I can see that the current parser needs significant updates to properly handle the structure. The format shows that each conference has a `confs` array with yearly instances, and we need to focus on the last (most recent) year entry.

Let me update the `parseYamlContent` function to properly parse this structure:

---



---

Perfect! I've completely rewritten the YAML parser to properly handle the CCF deadlines format you described. Here are the key improvements:

## Key Changes:

1. **Proper Structure Parsing**: The parser now correctly handles the nested structure:
   - Conference metadata (`title`, `description`, `sub`, `rank.ccf`, `dblp`)
   - `confs` array with yearly instances
   - Each year's `timeline` array with deadline information

2. **Focus on Latest Year**: As requested, the parser now focuses on the **last (most recent) year entry** from the `confs` array, following the instruction "There might be multiple years in the conf yield. The last one is required."

3. **Complete Timeline Parsing**: The parser now properly extracts:
   - `deadline`: Main deadline
   - `abstract_deadline`: Abstract submission deadline (if applicable)
   - `comment`: Optional comments

4. **Enhanced Data Structure**: The output now includes all relevant fields:
   - Original CCF fields (`title`, `description`, `sub`, `dblp`, `ccf_rank`)
   - Year-specific data (`id`, `link`, `timezone`, `date`, `place`)
   - Timeline data (`deadline`, `abstract_deadline`, `comment`)

5. **Robust Parsing**: Added helper functions:
   - `extractValue()`: Clean extraction of YAML values
   - `parseTimelineEntry()`: Proper timeline parsing
   - `saveParsedConference()`: Focus on the most recent year

## How it Works:

1. **Conference Level**: Parses `title`, `description`, `sub`, `rank.ccf`, `dblp`
2. **Confs Array**: Collects all yearly instances
3. **Latest Year**: Selects the last entry from the years array
4. **Timeline Processing**: Extracts all deadline information from the most recent year
5. **Output Generation**: Creates conference entries with complete metadata

The parser now correctly follows the YAML format specification and prioritizes the most recent year's deadline information as instructed.

---

